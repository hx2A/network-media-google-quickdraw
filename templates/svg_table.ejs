<html>

<head>
  <!--  <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css"> -->
  <link rel="stylesheet" href="/jquery-ui.min.css" type="text/css" />
  <link rel="stylesheet" href="/jquery-ui.theme.min.css" type="text/css" />
  <link rel="stylesheet" href="/style.css" type="text/css" />
  <script src="//ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <!--  <script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script> -->
  <script src="/jquery-ui.min.js"></script>
</head>

<body>
  <h1 class="title">Doodles by Countries</h1>
  <div class="">
    <div>
      <form id="form">
        <label for="countries" class="label">Country: </label>
        <select name="countries" id="countries">
          <% ref.countries.forEach(function(c) { -%>
            <option value="<%= c.toLowerCase() %>">
              <%= ref.isoCodes[c] %>
            </option>
            <% }); -%>
        </select>
        <label for="categories" class="label">Category: </label>
        <select name="categories" id="categories">
          <% ref.categories.forEach(function(c) { -%>
            <option value="<%= c %>">
              <%= String.toTitleCase(c) %>
            </option>
            <% }); -%>
        </select>
        <label for="recognized" class="label">Recognized by Google ML?</label>
        <select name="recognized" id="recognized">
          <option value="recognized">Recognized only</option>
          <option value="unrecognized">Unrecognized only</option>
          <option value="all">Recognized and Unrecognized</option>
        </select>
        <input id="submit" type="submit" value="Submit">
      </form>
    </div>

    <% data.forEach(function(datum) { %>

      <div class="drawing">
        <svg viewBox="0 0 255 255" height="200px" width="200px">
          <path d="<%= svg_path(datum['d']) %>" style="fill:none;stroke:#000000;stroke-width:1.0px;stroke-opacity:1" />
        </svg>
        <p class="drawing">
          <span class='labels'>
          Country: <br>
          Category: <br>
          Recognized: <br>
        </span>
          <span class='info'>
          <%= ref.isoCodes[datum['c']] %> <br>
          <%= String.toTitleCase(datum['w']) %> <br>
          <%= datum['r'] %> <br>
        </span>
        </p>
      </div>
      <% }); %>

        <script>
          $(function() {
            $("#countries").selectmenu().selectmenu("menuWidget").addClass("overflow");
            $("#categories").selectmenu().selectmenu("menuWidget").addClass("overflow");
            $("#recognized").selectmenu();
            $("#submit").button();
            

            $("#form").submit(function(e) {
              e.preventDefault();
              var country = $("#countries").val();
              var category = $("#categories").val();
              var recognized = $("#recognized").val();
              var url = '/sketches/' + country + '/' + category + '/' + recognized;
              window.location.href = url;
            });
          });
        </script>
  </div>
</body>

</html>